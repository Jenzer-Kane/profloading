<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script>
      $(document).ready(function () {
        $("#exampleModal").modal("show");
      });
    </script>
    <title>Create an Account</title>
  </head>
  <body>
    <!-- Flash message section -->
    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="container mt-3">
      <div class="alert alert-danger" role="alert">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
      </div>
    </div>
    {% endif %}
    {% endwith %}

    <form id="registrationForm" method="POST">
      <div class="container">
        <!-- Modal -->
        <div
          class="modal fade"
          id="exampleModal"
          tabindex="-1"
          data-bs-backdrop="static"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header" data-bs-keyboard="false">
                <h1 class="modal-title fs-5" id="exampleModalLabel">
                  Create an Account
                </h1>
              </div>
              <div class="modal-body">
                <div class="form-floating mb-3">
                  <input
                    type="text"
                    class="form-control"
                    id="floatingIDNumber"
                    name="employeeId"
                    placeholder="name@example.com"
                  />
                  <label for="floatingInput">Your Employee ID Number</label>
                </div>
                <div class="form-floating mb-3">
                  <input
                    type="text"
                    class="form-control"
                    id="floatingFullName"
                    name="employeeName"
                    placeholder="Dela Cruz, Juan P."
                  />
                  <label for="floatingInput">Name (First Name, Middle Initial, Surname)</label>
                </div>
                <div class="form-floating">
                  <input
                    type="password"
                    class="form-control"
                    id="floatingPassword"
                    placeholder="Password"
                    name="password"
                  />
                  <label for="floatingPassword">Password</label>
                </div>
                <div class="pt-2">
                  <a href="{{url_for('login')}}">Already have an account? Log In</a>
                </div>
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Confirm</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("registrationForm").addEventListener("submit", function (event) {
          var password = document.getElementById("floatingPassword").value;
          var specialChars = /[!@#$%^&*(),.?":{}|<>]/;
          var hasNumber = /\d/;
          var hasUpperCase = /[A-Z]/;

          if (!specialChars.test(password) || !hasNumber.test(password) || !hasUpperCase.test(password)) {
            alert("Password must contain at least one special character, one number, and one uppercase letter.");
            event.preventDefault();
          }
        });
      });
    </script>
  </body>
</html>
